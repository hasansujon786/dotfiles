# Basic Settings
set shell powershell
set preview true     # set previewer ~/.config/lf/pv.sh
set drawbox true
set icons true
set ignorecase true
set incsearch true
set tabstop 2
set scrolloff 5
set info size
set hidden true
set icons true
set ignorecase true
#set color256 true
#set number true
#set relativenumber true

# ---------------------------------------------------------------------------
# - Custom commands                                                         -
# ---------------------------------------------------------------------------
cmd mkdir %{{ mkdir }}
cmd touch %{{ touch }}
cmd doc $lf -doc | less
cmd fzf_jump ${{
  $res="$(fd --hidden --type directory --exclude '.git' | fzf --header='Jump to location')"
  if($res -ne "") {
    lf -remote "send $id cd $res"
  }
}}
cmd jump-to-git-root %{{
  $_root_dir="$(git rev-parse --show-toplevel)"
  if($_root_dir -eq "") {
    return lf -remote "send echo 'Not a Git repo!'"
  }
  $_pwd=$(pwd)
  $pattern = '[\\/]'
  $_pwd = $_pwd -replace $pattern, '/'
  if($_root_dir -eq $_pwd) {
    return lf -remote "send echo 'Already at Git repo root.'"
  }
  lf -remote "send $id cd $_root_dir"
}}

# ---------------------------------------------------------------------------
# - Bindings                                                                -
# ---------------------------------------------------------------------------
######## Remove some defaults ########
map y reload
map d reload
map p reload
map c reload
map r reload

######## Basic Functions ########
map I set hidden!
map F filter
map H top
map L bottom
map e $nvim $Env:f
map w $bash
map W $powershell
map i $less $Env:f
map o open
map O $explorer $Env:f
map E %{{ explorer $(dirname $Env:f) }}

map a push :touch<space>
map A push :mkdir<space>
map <enter> shell
map <delete> delete
map <f-2> rename
map <c-v> paste
map <c-x> cut
map <c-c> copy
map <c-r> $vimv $fx
map C clear

map <a-d> half-down
map <a-u> half-up
map <a-m> fzf_jump
map -- jump-to-git-root

# Archive bindings
map Zu %{{ unzip $Env:f }}
# *.tar.gz) tar -xzvf "$f" ;;
# *.tar.bz2) tar -xjvf "$f" ;;
# *.tar) tar -xvf "$f" ;;

# ---------------------------------------------------------------------------
# - Navigation Shortcut                                                     -
# ---------------------------------------------------------------------------

map .c cd C:\\
map .d cd D:\\
map .e cd E:\\
map .. cd ~/Desktop

map g. cd ~/dotfiles
map gd cd ~/Downloads
map gp cd ~/Pictures
map gv cd ~/Videos
map gm cd ~/Music
map gD cd ~/Documents
map gr cd E:\\repoes
map ga. cd ~/AppData
map gan cd ~/AppData/Local/nvim-data
